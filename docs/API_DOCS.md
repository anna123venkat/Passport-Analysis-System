# üìå API Documentation - Passport Analytical System

This document provides details on the API endpoints available in the **Passport Analytical System** backend.

---

##  Authentication

All protected routes require a **JWT token** in the `Authorization` header:
```
Authorization: Bearer <your_token>
```

---

##  User Authentication

### 1Ô∏è **User Registration**  
**Endpoint:** `POST /api/register`  
Registers a new user.  
**Request Body:**
```json
{
  "first_name": "John",
  "last_name": "Doe",
  "email": "john.doe@example.com",
  "password": "securepassword",
  "mobile": "9876543210"
}
```
**Response:**
```json
{
  "message": "User registered successfully",
  "token": "<jwt_token>"
}
```

---

### 2Ô∏è **User Login**  
**Endpoint:** `POST /api/login`  
Authenticates a user and returns a JWT token.  
**Request Body:**
```json
{
  "email": "john.doe@example.com",
  "password": "securepassword"
}
```
**Response:**
```json
{
  "message": "Login successful",
  "token": "<jwt_token>"
}
```

---

##  Passport Data Queries  

### 3Ô∏è **Get Passport Data by Kendra and Category**  
**Endpoint:** `GET /api/query1`  
**Query Params:**  
- `start_year` (e.g., `2018`)
- `end_year` (e.g., `2023`)
- `kendra` (e.g., `"Chennai"`)
- `age_category` (e.g., `"adult"`, `"kid"`)
- `gender` (e.g., `"male"`, `"female"`)

**Example Request:**  
```
GET /api/query1?start_year=2018&end_year=2023&kendra=Chennai&age_category=adult&gender=female
```

**Response:**
```json
[
  {
    "passportNumber": "U1141650",
    "first_name": "Sarah",
    "last_name": "Johnson"
  },
  {
    "passportNumber": "M5678923",
    "first_name": "Emma",
    "last_name": "Smith"
  }
]
```

---

### 4Ô∏è **Get Passport Issue Count Per Kendra**  
**Endpoint:** `GET /api/query2`  
Returns the count of passports issued per **Kendra** between two years.

**Query Params:**  
- `start_year` (e.g., `2018`)
- `end_year` (e.g., `2023`)

**Example Request:**  
```
GET /api/query2?start_year=2018&end_year=2023
```

**Response:**
```json
[
  { "kendra": "Chennai", "count": 1200 },
  { "kendra": "Delhi", "count": 950 }
]
```

---

### 5Ô∏è **Get Revenue Generated by Kendras**  
**Endpoint:** `GET /api/query3`  
Returns revenue generated by each **Kendra** between two years.

**Query Params:**  
- `start_year` (e.g., `2018`)
- `end_year` (e.g., `2023`)

**Example Request:**  
```
GET /api/query3?start_year=2018&end_year=2023
```

**Response:**
```json
[
  { "kendra": "Mumbai", "revenue": 5000000 },
  { "kendra": "Bangalore", "revenue": 4200000 }
]
```

---

### 6Ô∏è **Get Top Kendras for Tatkal Passports**  
**Endpoint:** `GET /api/query4`  
Returns the **top K Kendras** with the highest Tatkal passport issuance.

**Query Params:**  
- `start_year` (e.g., `2018`)
- `end_year` (e.g., `2023`)
- `k` (number of top Kendras to return)

**Example Request:**  
```
GET /api/query4?start_year=2018&end_year=2023&k=5
```

**Response:**
```json
[
  { "kendra": "Hyderabad", "count": 1500 },
  { "kendra": "Chennai", "count": 1200 }
]
```

---

##  Notes:
- All **query endpoints require authentication** (pass JWT token in the header).
- Ensure **MongoDB is running** before querying.
- Frontend can use these APIs to fetch and display passport analytics.

---
